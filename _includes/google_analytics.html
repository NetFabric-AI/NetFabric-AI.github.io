<script>
    // Define dataLayer and the gtag function.
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    
    // Set default consent to 'denied' as a placeholder
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'analytics_storage': 'denied'
    });
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics_tag_id }}">
</script>

<script>
    gtag('js', new Date());
    gtag('config', "{{ site.google_analytics_tag_id }}");
</script>

<!-- Update function for consent -->
<script>
    function consentGranted() {
        gtag('consent', 'update', {
            analytics_storage: 'granted'
        });
    }
</script>
